(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-66fb8f04"],{"07ac":function(e,t,a){var s=a("23e7"),n=a("6f53").values;s({target:"Object",stat:!0},{values:function(e){return n(e)}})},"0b7b":function(e,t,a){e.exports=a.p+"img/clock-regular.54749a5a.svg"},"3ea5":function(e,t,a){},"45fc":function(e,t,a){"use strict";var s=a("23e7"),n=a("b727").some,r=a("a640"),i=a("ae40"),o=r("some"),c=i("some");s({target:"Array",proto:!0,forced:!o||!c},{some:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}})},"5bd0":function(e,t,a){"use strict";var s=a("d61c"),n=a.n(s);n.a},"5c42":function(e,t,a){"use strict";var s=a("3ea5"),n=a.n(s);n.a},d61c:function(e,t,a){},e5ac:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"window white"},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.swapbtc,expression:"swapbtc"}],staticClass:"info-message gentle-message betaversion"},[e._v(" This is a beta version. Please test with small amounts and use with caution. ")]),a("div",{directives:[{name:"show",rawName:"v-show",value:["ren","sbtc"].includes(e.currentPool),expression:"['ren', 'sbtc'].includes(currentPool)"}],staticClass:"swapBTC-container info-message gentle-message"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.swapbtc,expression:"swapbtc"}],attrs:{id:"swapbtc",type:"checkbox",value:"swapbtc"},domProps:{checked:Array.isArray(e.swapbtc)?e._i(e.swapbtc,"swapbtc")>-1:e.swapbtc},on:{change:function(t){var a=e.swapbtc,s=t.target,n=!!s.checked;if(Array.isArray(a)){var r="swapbtc",i=e._i(a,r);s.checked?i<0&&(e.swapbtc=a.concat([r])):i>-1&&(e.swapbtc=a.slice(0,i).concat(a.slice(i+1)))}else e.swapbtc=n}}}),a("label",{attrs:{for:"swapbtc"}},[e._v("Deposit "),a("img",{staticClass:"token-icon vamiddle",attrs:{src:e.publicPath+"tokens/btc.svg"}}),a("a",{attrs:{href:"https://guides.curve.fi/how-to-swap-bitcoin-for-wbtc-or-renbtc/",rel:"noopener norefferer"}},[e._v("[?]")]),a("span",{directives:[{name:"show",rawName:"v-show",value:e.hasIncomplete>0&&0==e.swapbtc,expression:"hasIncomplete > 0 && swapbtc == false"}]},[e._v(" ("+e._s(e.hasIncomplete)+" incomplete tx) ")])]),a("span",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"loading line"})]),e.swapbtc?a("deposit-native",{on:{loaded:e.loaded}}):e._e(),!e.swapbtc||e.swapbtc&&!e.loaded?a("deposit"):e._e()],1)},n=[],r=(a("caad"),a("d3b7"),a("51bf")),i=a("2bd5"),o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"add-liquidity"},[s("ul",{staticClass:"currency-field-list"},e._l(Object.keys(e.currencies),(function(t,n){var r;return s("li",[s("label",{attrs:{for:"currency_"+n}},[s("span",{staticClass:"currency_label"},[s("img",{class:(r={"token-icon":!0},r[t+"-icon"]=!0,r["y"]=e.depositc&&!e.isPlain,r),attrs:{src:e.getTokenIcon(t)}}),s("span",{directives:[{name:"show",rawName:"v-show",value:e.depositc,expression:"depositc"}],staticClass:"token-symbol"},[e._v(e._s(e.currencies[t])+" "),s("span",{directives:[{name:"show",rawName:"v-show",value:!("usdt"==t&&"usdt"==e.currentPool||"pax"==t)&&!["susdv2","tbtc","ren","sbtc"].includes(e.currentPool),expression:"!(currency == 'usdt' && currentPool == 'usdt' || currency == 'pax') \n                                            && !['susdv2', 'tbtc', 'ren', 'sbtc'].includes(currentPool)"}]},[e._v(" (in "+e._s(e._f("capitalize")(t))+") ")])]),s("span",{directives:[{name:"show",rawName:"v-show",value:!e.depositc,expression:"!depositc"}]},[e._v(e._s(e._f("capitalize")(t))+" ")]),s("span",{staticClass:"maxBalanceCoin",on:{click:function(t){return e.setMaxBalanceCoin(n)}}},[e._v(" Max: "),s("span",{directives:[{name:"show",rawName:"v-show",value:("susdv2"==e.currentPool&&3==n||"sbtc"==e.currentPool&&2==n)&&"0.00"!=e.maxBalanceCoin(n),expression:"(currentPool == 'susdv2' && i == 3 || currentPool == 'sbtc' && i == 2)\n                                            && maxBalanceCoin(i) != '0.00'"}]},[e._v(" "+e._s(e.transferableBalanceText)+"/ ")]),s("span",[e._v(e._s(e.maxBalanceCoin(n))+" ")]),s("span",{directives:[{name:"show",rawName:"v-show",value:e.susdWaitingPeriod,expression:"susdWaitingPeriod"}]},[s("span",{staticClass:"tooltip"},[s("img",{staticClass:"icon small",attrs:{src:a("0b7b")}}),s("span",{staticClass:"tooltiptext normalFont"},[e._v(" Cannot transfer during waiting period. "+e._s(e.susdWaitingPeriodTime.toFixed(0))+" secs left. ")])])]),s("span",{directives:[{name:"show",rawName:"v-show",value:("susdv2"==e.currentPool&&3==n||"sbtc"==e.currentPool&&2==n)&&"0.00"!=e.maxBalanceCoin(n),expression:"(currentPool == 'susdv2' && i == 3 || currentPool == 'sbtc' && i == 2)\n                                            && maxBalanceCoin(i) != '0.00'"}],staticClass:"tooltip"},[e._v(" [?] "),s("span",{staticClass:"tooltiptext long normalFont"},[e._v(" Max transferrable amount is "+e._s(e.transferableBalanceText)+". You can free the remaining balance by settling. ")])])])])]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.inputs[n],expression:"inputs[i]"}],style:{backgroundColor:e.bgColors[n]},attrs:{type:"text",id:"currency_"+n,disabled:e.disabled,name:"from_cur"},domProps:{value:e.inputs[n]},on:{input:[function(t){t.target.composing||e.$set(e.inputs,n,t.target.value)},function(t){return e.change_currency(n,!0)}]}})])})),0),s("div",{staticClass:"gas-price-section"},[s("gas-price")],1),s("ul",{staticClass:"checkbox-group"},[s("li",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.sync_balances,expression:"sync_balances"}],attrs:{id:"sync-balances",type:"checkbox",name:"sync-balances",disabled:e.disabledButtons,checked:""},domProps:{checked:Array.isArray(e.sync_balances)?e._i(e.sync_balances,null)>-1:e.sync_balances},on:{change:[function(t){var a=e.sync_balances,s=t.target,n=!!s.checked;if(Array.isArray(a)){var r=null,i=e._i(a,r);s.checked?i<0&&(e.sync_balances=a.concat([r])):i>-1&&(e.sync_balances=a.slice(0,i).concat(a.slice(i+1)))}else e.sync_balances=n},e.handle_sync_balances_proportion]}}),s("label",{attrs:{for:"sync-balances"}},[e._v("Add all coins in a balanced proportion")])]),s("li",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.max_balances,expression:"max_balances"}],attrs:{id:"max-balances",type:"checkbox",name:"max-balances",disabled:e.disabledButtons,checked:""},domProps:{checked:Array.isArray(e.max_balances)?e._i(e.max_balances,null)>-1:e.max_balances},on:{change:[function(t){var a=e.max_balances,s=t.target,n=!!s.checked;if(Array.isArray(a)){var r=null,i=e._i(a,r);s.checked?i<0&&(e.max_balances=a.concat([r])):i>-1&&(e.max_balances=a.slice(0,i).concat(a.slice(i+1)))}else e.max_balances=n},e.handle_sync_balances]}}),s("label",{attrs:{for:"max-balances"}},[e._v("Use maximum amount of coins available")])]),s("li",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.inf_approval,expression:"inf_approval"}],attrs:{id:"inf-approval",type:"checkbox",name:"inf-approval",checked:""},domProps:{checked:Array.isArray(e.inf_approval)?e._i(e.inf_approval,null)>-1:e.inf_approval},on:{change:function(t){var a=e.inf_approval,s=t.target,n=!!s.checked;if(Array.isArray(a)){var r=null,i=e._i(a,r);s.checked?i<0&&(e.inf_approval=a.concat([r])):i>-1&&(e.inf_approval=a.slice(0,i).concat(a.slice(i+1)))}else e.inf_approval=n}}}),e._m(0)]),s("li",{directives:[{name:"show",rawName:"v-show",value:!["susd","susdv2","tbtc","ren","sbtc"].includes(e.currentPool),expression:"!['susd','susdv2','tbtc','ren','sbtc'].includes(currentPool)"}]},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.depositc,expression:"depositc"}],attrs:{id:"depositc",type:"checkbox",name:"inf-approval",checked:""},domProps:{checked:Array.isArray(e.depositc)?e._i(e.depositc,null)>-1:e.depositc},on:{change:function(t){var a=e.depositc,s=t.target,n=!!s.checked;if(Array.isArray(a)){var r=null,i=e._i(a,r);s.checked?i<0&&(e.depositc=a.concat([r])):i>-1&&(e.depositc=a.slice(0,i).concat(a.slice(i+1)))}else e.depositc=n}}}),s("label",{attrs:{for:"depositc"}},[e._v("Deposit wrapped")])])]),s("div",{directives:[{name:"show",rawName:"v-show",value:e.susdWaitingPeriod,expression:"susdWaitingPeriod"}],staticClass:"simple-error pulse"},[e._v(" Cannot transfer "+e._s("susdv2"==e.currentPool?"sUSD":"sBTC")+" during waiting period. "+e._s(e.susdWaitingPeriodTime.toFixed(0))+" secs left. ")]),s("p",{staticClass:"trade-buttons",staticStyle:{"text-align":"center"}},[s("button",{attrs:{id:"add-liquidity",disabled:"susdv2"==e.currentPool&&e.slippage<-.03||e.depositingZeroWarning||e.isZeroSlippage},on:{click:function(t){e.justDeposit=!0,e.handle_add_liquidity()}}},[e._v(" Deposit "),s("span",{directives:[{name:"show",rawName:"v-show",value:1==e.loadingAction,expression:"loadingAction == 1"}],staticClass:"loading line"})])]),s("p",{directives:[{name:"show",rawName:"v-show",value:e.lpCrvReceived>0,expression:"lpCrvReceived > 0"}],staticClass:"info-message gentle-message"},[e._v(" You'll receive minimum "+e._s(e.lpCrvReceivedText)+" Curve "+e._s(e.currentPool)+" LP tokens "),s("sub",[e._v(e._s((100*(1-e.getMaxSlippage)).toFixed(2))+"% max slippage")]),s("span",{staticClass:"curvelpusd"},[e._v(" 1 Curve "+e._s(e.currentPool)+" LP token = "+e._s((1*e.virtual_price).toFixed(6))+" "+e._s(["ren","sbtc"].includes(e.currentPool)?"BTC":"USD")+" ")])]),s("div",[s("button",{staticClass:"advanced-options-toggle",on:{click:function(t){e.showadvancedoptions=!e.showadvancedoptions}}},[e._v(" Advanced options "),s("span",{directives:[{name:"show",rawName:"v-show",value:!e.showadvancedoptions,expression:"!showadvancedoptions"}]},[s("img",{attrs:{src:"/img/sdw/arrow-up@2x.png",alt:""}})]),s("span",{directives:[{name:"show",rawName:"v-show",value:e.showadvancedoptions,expression:"showadvancedoptions"}]},[s("img",{attrs:{src:"/img/sdw/arrow-down@2x.png",alt:""}})])]),s("div",{directives:[{name:"show",rawName:"v-show",value:e.showadvancedoptions,expression:"showadvancedoptions"}],staticClass:"slippage-section"},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.hasRewards&&e.totalShare>0&&["susdv2","sbtc","y","iearn"].includes(e.currentPool),expression:"hasRewards && totalShare > 0 && ['susdv2', 'sbtc', 'y', 'iearn'].includes(currentPool)"}]},[s("label",{attrs:{for:"stakepercentage"}},[e._v("Stake %")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.stakepercentage,expression:"stakepercentage"}],class:{invalid:e.stakePercentageInvalid},attrs:{id:"stakepercentage"},domProps:{value:e.stakepercentage},on:{input:function(t){t.target.composing||(e.stakepercentage=t.target.value)}}}),s("button",{directives:[{name:"show",rawName:"v-show",value:e.totalShare>0&&["susdv2","sbtc","y","iearn"].includes(e.currentPool),expression:"totalShare > 0 && ['susdv2', 'sbtc', 'y', 'iearn'].includes(currentPool)"}],attrs:{id:"stakeunstaked",disabled:e.stakePercentageInvalid},on:{click:function(t){return e.stakeTokens()}}},[e._v(" Stake unstaked "),s("span",{directives:[{name:"show",rawName:"v-show",value:3==e.loadingAction,expression:"loadingAction == 3"}],staticClass:"loading line"})])]),s("div",{attrs:{id:"max_slippage"}},[e._m(1),s("ul",[s("li",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.maxSlippage,expression:"maxSlippage"}],attrs:{id:"slippage01",type:"radio",name:"slippage",value:"0.1"},domProps:{checked:e._q(e.maxSlippage,"0.1")},on:{change:function(t){e.maxSlippage="0.1"}}}),s("label",{attrs:{for:"slippage01"}},[e._v("0.1%")])]),s("li",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.maxSlippage,expression:"maxSlippage"}],attrs:{id:"slippage1",type:"radio",name:"slippage",checked:"",value:"1"},domProps:{checked:e._q(e.maxSlippage,"1")},on:{change:function(t){e.maxSlippage="1"}}}),s("label",{attrs:{for:"slippage1"}},[e._v("1%")])]),s("li",[s("input",{attrs:{id:"custom_slippage",type:"radio",name:"slippage",value:"-"},on:{click:function(t){e.customippageDisabled=!1}}}),s("label",{attrs:{for:"custom_slippage"},on:{click:function(t){e.customSlippageDisabled=!1}}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.maxInputSlippage,expression:"maxInputSlippage"}],class:{invalid:e.warningInputSlippage},attrs:{type:"text",id:"custom_slippage_input",disabled:e.customSlippageDisabled,name:"custom_slippage_input"},domProps:{value:e.maxInputSlippage},on:{input:function(t){t.target.composing||(e.maxInputSlippage=t.target.value)}}}),e._v(" % ")])])]),s("div",{directives:[{name:"show",rawName:"v-show",value:e.warningInputSlippage,expression:"warningInputSlippage"}],staticClass:"simple-error"},[e._v(" "+e._s(e.maxInputSlippage)+"% is too low of a slippage - your transaction may fail ")])])])]),s("p",{directives:[{name:"show",rawName:"v-show",value:["ren","sbtc"].includes(e.currentPool),expression:"['ren', 'sbtc'].includes(currentPool)"}],staticClass:"trade-buttons"},[s("a",{attrs:{href:"https://bridge.renproject.io/"}},[e._v("Mint/redeem renBTC")])]),s("div",{directives:[{name:"show",rawName:"v-show",value:["susdv2","sbtc"].includes(e.currentPool),expression:"['susdv2', 'sbtc'].includes(currentPool)"}],staticClass:"mintr-title"},[s("a",{attrs:{href:"https://mintr.synthetix.io/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Manage staking in Mintr")])]),s("div",{directives:[{name:"show",rawName:"v-show",value:["y","iearn"].includes(e.currentPool),expression:"['y', 'iearn'].includes(currentPool)"}],staticClass:"mintr-title"},[s("a",{attrs:{href:"https://ygov.finance/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Manage staking in yGov")])]),s("button",{directives:[{name:"show",rawName:"v-show",value:"compound"==e.currentPool&&e.oldBalance>0,expression:"currentPool == 'compound' && oldBalance > 0"}],attrs:{id:"migrate-new"},on:{click:e.handle_migrate_new}},[e._v("Migrate from old")]),s("div",{directives:[{name:"show",rawName:"v-show",value:e.show_loading,expression:"show_loading"}],staticClass:"info-message gentle-message"},[s("span",{domProps:{innerHTML:e._s(e.waitingMessage)}}),e._v(" "),s("span",{staticClass:"loading line"})]),s("div",{directives:[{name:"show",rawName:"v-show",value:e.estimateGas,expression:"estimateGas"}],staticClass:"info-message gentle-message"},[e._v(" Estimated tx cost: "+e._s((e.estimateGas*e.gasPrice/1e9*e.ethPrice).toFixed(2))+"$ ")]),s("div",{directives:[{name:"show",rawName:"v-show",value:e.errorStaking,expression:"errorStaking"}],staticClass:"simple-error"},[e._v(" There was an error in staking your tokens. You can manually stake them on "),s("a",{directives:[{name:"show",rawName:"v-show",value:["susdv2","sbtc"].includes(e.currentPool),expression:"['susdv2', 'sbtc'].includes(currentPool)"}],attrs:{href:"https://mintr.synthetix.io/",target:"_blank",rel:"noopener noreferrer"}},[e._v(" Mintr. ")]),s("a",{directives:[{name:"show",rawName:"v-show",value:["y","iearn"].includes(e.currentPool),expression:"['y', 'iearn'].includes(currentPool)"}],attrs:{href:"https://ygov.finance/",target:"_blank",rel:"noopener noreferrer"}},[e._v(" yGov. ")])]),s("div",{directives:[{name:"show",rawName:"v-show",value:e.compareInputsWarning.length&&!e.max_balances,expression:"compareInputsWarning.length && !max_balances"}],staticClass:"simple-error pulse"},[e._v(" Not enough balance for currencies "+e._s(e.compareInputsWarning.toString())+" "),s("p",{directives:[{name:"show",rawName:"v-show",value:e.compareInputsWarning.length==e.N_COINS-1,expression:"compareInputsWarning.length == N_COINS - 1"}]},[e._v(' Maybe you forgot to uncheck the first "Add all coins in a balanced proportion" checkbox? ')])]),s("div",{directives:[{name:"show",rawName:"v-show",value:e.depositingZeroWarning&&!e.max_balances,expression:"depositingZeroWarning && !max_balances"}],staticClass:"simple-error pulse"},[e._v(" You're depositing 0 coins. "),s("p",[e._v(' Maybe you forgot to uncheck the first "Add all coins in a balanced proportion" checkbox? ')])]),s("Slippage")],1)])},c=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{attrs:{for:"inf-approval"}},[e._v("Infinite approval - trust this contract forever "),a("span",{staticClass:"tooltip"},[e._v("[?] "),a("span",{staticClass:"tooltiptext long"},[e._v(" Preapprove the contract to to be able to spend any amount of your coins. You will not need to approve again. ")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("h2",[e._v(" Max slippage: "),a("span",{staticClass:"tooltip"},[e._v(" [?] "),a("span",{staticClass:"tooltiptext long"},[e._v(" Customize the maximum slippage you can get when depositing ")])])])}],l=(a("99af"),a("cb29"),a("4de4"),a("4160"),a("d81d"),a("fb6a"),a("45fc"),a("a9e3"),a("b680"),a("b64b"),a("07ac"),a("25f0"),a("3ca3"),a("159b"),a("ddb0"),a("2909")),u=a("3835"),d=a("b85c"),p=a("5530"),v=(a("96cf"),a("1da1")),m=a("2b0e"),h=a("d99e"),b=a("cf45"),g=a("5245"),f=a("2fa3"),w=a("0a37"),_=a("e7e9"),x=a("0c7c"),k=a("901e"),P=a.n(k),C=a("0c33");g["f"].compound;console.log(r["b"].coins);var y={components:{Slippage:C["a"],GasPrice:_["a"]},data:function(){return{disabled:!1,disabledButtons:!1,sync_balances:!1,max_balances:!0,inf_approval:!0,wallet_balances:[],transferableBalance:null,susdWaitingPeriod:!1,susdWaitingPeriodTime:0,balances:[],inputs:[],amounts:[],bgColors:[],depositc:!1,coins:[],rates:[],swap_address:r["b"].swap_address,lpCrvReceived:null,show_loading:!1,waitingMessage:"",estimateGas:0,ethPrice:0,justDeposit:!1,stakepercentage:100,get showadvancedoptions(){return"true"===localStorage.getItem("advancedoptions")},set showadvancedoptions(e){localStorage.setItem("advancedoptions",e)},maxSlippage:1,maxInputSlippage:"",customSlippageDisabled:!0,loadingAction:!1,errorStaking:!1,slippagePromise:f["l"](Promise.resolve()),hasRewards:!0}},created:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$watch((function(){return r["b"].default_account}),(function(t,a){t&&a&&t.toLowerCase()!=a.toLowerCase()&&e.mounted()})),e.$watch((function(){return r["b"].initializedContracts}),(function(t){t&&e.mounted()})),e.$watch((function(){return r["b"].currentContract}),(function(t,a){e.setInputStyles(!1,t,a),r["b"].initializedContracts&&e.mounted()}));case 3:case"end":return t.stop()}}),t)})))()},watch:{depositc:function(e,t){var a=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a.changeSwapInfo(e),t.next=3,a.handle_sync_balances();case 3:return!a.max_balances&&a.highlightAllInputs(),t.next=6,a.calcSlippage();case 6:case"end":return t.stop()}}),t)})))()},getMaxSlippage:function(){this.getLPCrvReceived()}},computed:Object(p["a"])({},r["d"],{minAmount:function(){return["tbtc","ren","sbtc"].includes(r["b"].currentContract)?1e-8:.01},calcFee:function(){var e=g["f"][r["b"].currentContract].N_COINS;return this.fee/100*e/(4*(e-1))},compareInputsWarning:function(){var e,t=[],a=Object(d["a"])(Object.keys(this.currencies).entries());try{for(a.s();!(e=a.n()).done;){var s=Object(u["a"])(e.value,2),n=s[0],r=s[1],i=this.wallet_balances[n];"susdv2"==this.currentPool&&3==n&&(i=this.susdWaitingPeriod?0:this.transferableBalance);var o=P()(P()(i).times(this.rates[n])).minus(this.inputs[n]);o.lt(P()(-.01))&&t.push(this.depositc?this.currencies[r]:r.toUpperCase())}}catch(c){a.e(c)}finally{a.f()}return t},depositingZeroWarning:function(){return this.inputs.filter((function(e){return 0==+e})).length==this.N_COINS&&!this.disabledButtons},isPlain:function(){return["susdv2","tbtc","ren","sbtc"].includes(this.currentPool)},transferableBalanceText:function(){return this.toFixed(this.transferableBalance/1e18)},virtual_price:function(){return r["b"].virtual_price},lpCrvReceivedText:function(){return this.toFixed(this.lpCrvReceived)},gasPrice:function(){return w["a"].gasPrice},gasPriceWei:function(){return w["a"].gasPriceWei},stakePercentageInvalid:function(){return this.stakepercentage<0||this.stakepercentage>100},getMaxSlippage:function(){var e=+this.maxSlippage;return this.maxInputSlippage&&(e=+this.maxInputSlippage),(100-e)/100},warningInputSlippage:function(){return!!this.maxInputSlippage&&+this.maxInputSlippage<.5},isZeroSlippage:function(){return""!==this.maxInputSlippage&&(0==+this.maxInputSlippage||isNaN(this.maxInputSlippage))}}),mounted:function(){this.setInputStyles(!0),r["b"].initializedContracts&&this.mounted()},methods:{stakeTokens:function(e){var t=arguments,a=this;return Object(v["a"])(regeneratorRuntime.mark((function s(){var n,i,o,c,l;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(n=t.length>1&&void 0!==t[1]&&t[1],3!=a.loadingAction){s.next=3;break}return s.abrupt("return");case 3:if(a.setLoadingAction(3),e){s.next=11;break}return s.t0=P.a,s.next=8,r["b"].swap_token.methods.balanceOf(r["b"].default_account).call();case 8:s.t1=s.sent,e=(0,s.t0)(s.t1),e=P()(a.stakepercentage/100).times(e);case 11:return a.waitingMessage="Please approve staking ".concat(a.toFixed(e.div(P()(1e18)))," of your sCurve tokens"),i=Object(h["d"])(a.waitingMessage),o=i.dismiss,s.next=15,b["ensure_stake_allowance"](e,r["b"].curveRewards,a.inf_approval);case 15:return o(),a.waitingMessage="Please confirm stake transaction ".concat(n?"(2/2)":""),c=Object(h["d"])(a.waitingMessage),o=c.dismiss,s.next=20,Promise.all([f["i"]()]);case 20:return l=s.sent,a.ethPrice=l[0],a.estimateGas=2e5,s.prev=23,s.next=26,r["b"].curveRewards.methods.stake(e.toFixed(0,1)).send({from:r["b"].default_account,gasPrice:a.gasPriceWei,gas:4e5}).once("transactionHash",(function(e){a.waitingMessage="Waiting for stake transaction to confirm \n                            ".concat(n?"(2/2)":"",": no further action needed"),o(),Object(h["c"])(e)}));case 26:r["b"].totalShare-=e,b["update_fee_info"](),s.next=35;break;case 30:s.prev=30,s.t2=s["catch"](23),console.error(s.t2),o(),x["a"](s.t2);case 35:a.waitingMessage="",a.show_loading=!1;case 37:case"end":return s.stop()}}),s,null,[[23,30]])})))()},mounted:function(e){var t=this;return Object(v["a"])(regeneratorRuntime.mark((function e(){var a,s,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return["susd","susdv2","tbtc","ren","sbtc"].includes(r["b"].currentContract)?t.depositc=!0:t.depositc=!1,t.changeSwapInfo(t.depositc),r["b"].showSlippage=!1,r["b"].slippage=0,e.next=6,t.handle_sync_balances();case 6:return e.next=8,t.getLPCrvReceived();case 8:return e.next=10,t.calcSlippage();case 10:return a=Object(l["a"])(Array(r["b"].N_COINS).keys()).map((function(e){return[t.coins[e]._address,t.coins[e].methods.allowance(r["b"].default_account||"0x0000000000000000000000000000000000000000",t.swap_address).encodeABI()]})),e.next=13,r["b"].multicall.methods.aggregate(a).call();case 13:s=e.sent,n=s[1].map((function(e){return r["b"].web3.eth.abi.decodeParameter("uint256",e)})),n.slice(0,n.length-1).some((function(e){return P()(e).lte(r["b"].max_allowance.div(P()(2)))>0}))&&(t.inf_approval=!1),i=Date.now()/1e3,["susdv2","sbtc","y","iearn"].includes(t.currentPool)&&+n[n.length-1]<i&&(t.hasRewards=!1),t.disabledButtons=!1;case 19:case"end":return e.stop()}}),e)})))()},getTokenIcon:function(e){return f["j"](e,this.depositc,this.currentPool)},toFixed:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(0==+e&&["ren","sbtc"].includes(r["b"].currentContract))return"0.00";2==t&&["tbtc","ren","sbtc"].includes(r["b"].currentContract)&&(t=8);var a=(+e).toFixed(t);return isNaN(a)?"0.00":a},maxBalanceCoin:function(e){return this.toFixed(this.wallet_balances[e]*this.rates[e])},setMaxBalanceCoin:function(e){if(m["a"].set(this.inputs,e,this.maxBalanceCoin(e)),"susdv2"==this.currentPool&&3==e||"sbtc"==this.currentPool&&2==e){var t=this.susdWaitingPeriod?0:P()(this.transferableBalance).times(this.rates[e]).toString();m["a"].set(this.inputs,e,t)}},inputsFormat:function(e){return this.inputs[e]?this.toFixed(+this.inputs[e]):"0.00"},changeSwapInfo:function(e){e?(this.coins=r["b"].coins,"susdv2"==this.currentPool&&m["a"].set(this.coins,3,r["b"].underlying_coins[3]),"sbtc"==this.currentPool&&m["a"].set(this.coins,2,r["b"].underlying_coins[2]),this.rates=r["b"].c_rates,this.swap_address=r["b"].swap_address):(this.coins=r["b"].underlying_coins,this.rates=r["b"].coin_precisions.map((function(e){return 1/e})),this.swap_address=r["b"].deposit_zap._address)},setInputStyles:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0;if(a){for(var s=0;s<g["f"][t].N_COINS-g["f"][a].N_COINS;s++)this.inputs.push("0.00");g["f"][a].N_COINS-g["f"][t].N_COINS>0&&(this.inputs=this.inputs.filter((function(e,a){return a<g["f"][t].N_COINS})))}else e&&(this.inputs=new Array(Object.keys(this.currencies).length).fill("0.00"));this.bgColors=Array(r["b"].N_COINS).fill({backgroundColor:"#707070",color:"#d0d0d0"})},calcSlippage:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.slippagePromise.cancel(),e.slippagePromise=f["l"](b["calc_slippage"](e.inputs,!0)),t.next=5,e.slippagePromise;case 5:t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},handle_sync_balances:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){var a,s,n,i,o,c,l,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,b["update_fee_info"]();case 2:for(a=[],s=0;s<r["b"].N_COINS;s++)a.push([e.coins[s]._address,e.coins[s].methods.balanceOf(r["b"].default_account||"0x0000000000000000000000000000000000000000").encodeABI()]),a.push([r["b"].swap._address,r["b"].swap.methods.balances(s).encodeABI()]);return console.log(a),"susdv2"!=e.currentPool&&"sbtc"!=e.currentPool||("susdv2"==e.currentPool?3:2,"0x7355534400000000000000000000000000000000000000000000000000000000","sbtc"==e.currentPool&&"0x7342544300000000000000000000000000000000000000000000000000000000"),t.next=8,r["b"].multicall.methods.aggregate(a).call();case 8:if(n=t.sent,i=n[1].map((function(e){return r["b"].web3.eth.abi.decodeParameter("uint256",e)})),o=i,console.log(n),f["d"](o,2).map((function(t,a){m["a"].set(e.wallet_balances,a,t[0]),r["b"].default_account||m["a"].set(e.wallet_balances,a,0),m["a"].set(e.balances,a,+t[1])})),"susdv2"!=e.currentPool&&"sbtc"!=e.currentPool||(e.transferableBalance=i[i.length-2]),e.max_balances)for(e.disabled=!0,c=0;c<r["b"].N_COINS;c++)l=e.wallet_balances[c]*r["b"].c_rates[c],e.depositc||(l=e.wallet_balances[c]/g["f"][r["b"].currentContract].coin_precisions[c]),u=l,u=e.toFixed(l),0==u&&(u="0.00"),m["a"].set(e.inputs,c,e.toFixed(u)),("susdv2"==e.currentPool&&3==c||"sbtc"==e.currentPool&&2==c)&&(2,"sbtc"==e.currentPool&&2==c&&18,e.susdWaitingPeriod?0:e.transferableBalance,m["a"].set(e.inputs,c,e.toFixed(P()(e.transferableBalance).div(1e18))));else e.disabled=!1;case 15:case"end":return t.stop()}}),t)})))()},handle_sync_balances_proportion:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.handle_sync_balances();case 2:case"end":return t.stop()}}),t)})))()},deposit_stake:function(){this.show_loading=!0,this.handle_add_liquidity(!0)},setLoadingAction:function(e){var t=this;this.loadingAction=e,setTimeout((function(){return t.loadingAction=!1}),500)},handle_add_liquidity:function(){var e=arguments,t=this;return Object(v["a"])(regeneratorRuntime.mark((function a(){var s,n,i,o,c,u,d,p,v,w,_,k,C,y,S,N,I,A,O;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(s=e.length>0&&void 0!==e[0]&&e[0],n=0==s?1:2,t.loadingAction!=n){a.next=4;break}return a.abrupt("return");case 4:return t.setLoadingAction(n),a.next=7,Promise.all([f["i"]()]);case 7:return i=a.sent,t.ethPrice=i[0],t.show_loading=!0,o=[],Object(l["a"])(Array(r["b"].N_COINS).keys()).map((function(e){o.push([t.coins[e]._address,t.coins[e].methods.balanceOf(r["b"].default_account).encodeABI()])})),c=1,o.push([r["b"].swap_token._address,r["b"].swap_token.methods.totalSupply().encodeABI()]),["susdv2","sbtc"].includes(t.currentPool)&&("0x7355534400000000000000000000000000000000000000000000000000000000","sbtc"==t.currentPool&&"0x7342544300000000000000000000000000000000000000000000000000000000"),console.log(o),a.next=18,r["b"].multicall.methods.aggregate(o).call();case 18:if(u=a.sent,d=u[1].map((function(e){return r["b"].web3.eth.abi.decodeParameter("uint256",e)})),console.log(d),d.slice(0,d.length-c).forEach((function(e,a){var s=g["f"][r["b"].currentContract],n=t.depositc?s.wrapped_precisions[a]:s.coin_precisions[a],i=P()(e);i=t.depositc?P()(i).times(r["b"].c_rates[a]):P()(i).div(n),("susdv2"==t.currentPool&&3==a||"sbtc"==t.currentPool&&2==a)&&0!=+d[d.length-1]&&(i=P()(0));var o=P()(i).minus(P()(t.inputs[a]));if(!t.inputs[a])return m["a"].set(t.amounts,a,0);P()(i).gt(0)&&o.lt(0)&&P()(o).lt(P()(t.minAmount))?(t.depositc||(e=P()(e).div(n).div(r["b"].c_rates[a])),m["a"].set(t.amounts,a,P()(e).toFixed(0,1))):m["a"].set(t.amounts,a,P()(t.inputs[a]).div(r["b"].c_rates[a]).toFixed(0,1))})),t.amounts=t.amounts.map((function(e){return e||0})),p=+d[d.length-c],t.waitingMessage="Please approve spending your coins",v=t.inputs.filter(Number).length,w=t.inputs.map((function(e,a){if(!e)return 0;var s=g["f"][r["b"].currentContract],n=P()(t.wallet_balances[a]).div(s.coin_precisions[a]).minus(e),i=t.wallet_balances[a];return("susdv2"==t.currentPool&&3==a||"sbtc"==t.currentPool&&2==a)&&(i=t.transferableBalance),("susdv2"==t.currentPool&&3==a||"sbtc"==t.currentPool&&2==a)&&0!=+d[d.length-1]&&(i=0),P()(i).gt(0)&&n.lt(0)&&n.lt(P()(t.minAmount))?P()(i).toFixed(0,1):P()(e).times(r["b"].coin_precisions[a]).toFixed(0,1)})),_=0,!(p>0)){a.next=35;break}return k=t.amounts,a.next=32,r["b"].swap.methods.calc_token_amount(k,!0).call();case 32:_=a.sent,_=P()(_).times(P()(1).minus(P()(t.calcFee))),_=P()(_).times(P()(t.getMaxSlippage)).toFixed(0,1);case 35:if(t.depositc?t.estimateGas=r["c"].deposit[t.currentPool]/2:t.estimateGas=(0|r["c"].depositzap[t.currentPool].deposit(v))/1.5,!t.inf_approval){a.next=41;break}return a.next=39,b["ensure_allowance"](t.amounts,!t.depositc,void 0,void 0,!0);case 39:a.next=48;break;case 41:if(!t.depositc){a.next=46;break}return a.next=44,b["ensure_allowance"](t.amounts,!1);case 44:a.next=48;break;case 46:return a.next=48,b["ensure_allowance"](w,!0);case 48:if(y=0,!t.depositc){a.next=74;break}return t.waitingMessage="Please confirm deposit transaction",S=Object(h["d"])(t.waitingMessage),N=S.dismiss,a.next=54,f["o"](100);case 54:return I=r["b"].swap.methods.add_liquidity(t.amounts,_).send({from:r["b"].default_account,gasPrice:t.gasPriceWei,gas:r["c"].deposit[t.currentPool]}).once("transactionHash",(function(e){N(),Object(h["c"])(e),t.waitingMessage="Waiting for deposit \n                            <a href='http://etherscan.io/tx/".concat(e,"'>transaction</a> \n                            to confirm ").concat(s?"before staking":"no further action required")})),a.prev=55,a.next=58,I;case 58:C=a.sent,a.next=72;break;case 61:if(a.prev=61,a.t0=a["catch"](55),console.error(a.t0),N(),x["a"](a.t0),-32603!=a.t0.code){a.next=72;break}return a.next=69,b["setTimeout"](300);case 69:return a.next=71,I;case 71:C=a.sent;case 72:a.next=96;break;case 74:return A=0|r["c"].depositzap[t.currentPool].deposit(v),console.warn(t.inputs,"inputs",w,"uamounts",t.amounts,"amounts",r["b"].swap._address,"swap address",r["b"].coin_precisions,"coin precisions",r["b"].c_rates,"c rates",r["b"].coins.map((function(e){return e._address})),"coins",r["b"].underlying_coins.map((function(e){return e._address})),"underlying_coins",r["b"].virtual_price,"virtual_price",_,"token_amount",Date.now()),t.waitingMessage="Please confirm deposit transaction",a.next=79,f["o"](100);case 79:return O=r["b"].deposit_zap.methods.add_liquidity(w,_).send({from:r["b"].default_account,gasPrice:t.gasPriceWei,gas:A}).once("transactionHash",(function(e){Object(h["c"])(e),t.waitingMessage="Waiting for deposit \n                            <a href='http://etherscan.io/tx/".concat(e,"'>transaction</a>\n                            to confirm ").concat(s?"before staking (1/2)":"no further action required"),console.warn(e,"tx hash")})),a.prev=80,a.next=83,O;case 83:C=a.sent,a.next=96;break;case 86:if(a.prev=86,a.t1=a["catch"](80),console.error(a.t1),x["a"](a.t1),-32603!=a.t1.code){a.next=96;break}return a.next=93,b["setTimeout"](300);case 93:return a.next=95,O;case 95:C=a.sent;case 96:if(t.waitingMessage="",s||(t.show_loading=!1),!s||!["susdv2","sbtc","y","iearn"].includes(t.currentPool)){a.next=122;break}return console.warn(C.events),a.prev=100,y=P()(Object.values(C.events).filter((function(e){return(e.address.toLowerCase()==g["f"].susdv2.token_address.toLowerCase()||e.address.toLowerCase()==g["f"].sbtc.token_address.toLowerCase()||e.address.toLowerCase()==g["f"].iearn.token_address.toLowerCase())&&"0x0000000000000000000000000000000000000000000000000000000000000000"==e.raw.topics[1]&&(e.raw.topics[2].toLowerCase()=="0x000000000000000000000000"+r["b"].default_account.slice(2).toLowerCase()||e.raw.topics[2].toLowerCase()=="0x000000000000000000000000"+g["f"].iearn.deposit_address.slice(2).toLowerCase())}))[0].raw.data),a.next=104,f["o"](100);case 104:return a.next=106,t.stakeTokens(y,!0);case 106:a.next=122;break;case 108:return a.prev=108,a.t2=a["catch"](100),a.prev=110,y=P()(Object.values(C.logs).filter((function(e){return(e.address.toLowerCase()==g["f"].susdv2.token_address.toLowerCase()||e.address.toLowerCase()==g["f"].sbtc.token_address.toLowerCase()||e.address.toLowerCase()==g["f"].iearn.token_address.toLowerCase())&&"0x0000000000000000000000000000000000000000000000000000000000000000"==e.topics[1]&&(e.topics[2].toLowerCase()=="0x000000000000000000000000"+r["b"].default_account.slice(2).toLowerCase()||e.raw.topics[2].toLowerCase()=="0x000000000000000000000000"+g["f"].iearn.deposit_address.slice(2).toLowerCase())}))[0].data),a.next=114,f["o"](100);case 114:return a.next=116,t.stakeTokens(y,!0);case 116:a.next=122;break;case 118:a.prev=118,a.t3=a["catch"](110),console.error(a.t3),t.errorStaking=!0;case 122:return t.estimateGas=0,t.justDeposit=!1,a.next=126,t.handle_sync_balances();case 126:b["update_fee_info"]();case 127:case"end":return a.stop()}}),a,null,[[55,61],[80,86],[100,108],[110,118]])})))()},highlightAllInputs:function(){for(var e=0;e<r["b"].N_COINS;e++)this.highlightInputs(e)},highlightInputs:function(e){var t=this.inputs[e],a=this.wallet_balances[e];("susdv2"==this.currentPool&&3==e||"sbtc"==this.currentPool&&2==e)&&(a=this.transferableBalance),t>a*this.rates[e]?m["a"].set(this.bgColors,e,"red"):m["a"].set(this.bgColors,e,"blue")},getLPCrvReceived:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.inputs.map((function(e){return e||0})),t.next=3,r["b"].swap.methods.calc_token_amount(a.map((function(e,t){return P()(e).div(r["b"].c_rates[t]).toFixed(0,1)})),!0).call();case 3:t.t0=t.sent,t.t1=t.t0/1e18,t.t2=e.getMaxSlippage,e.lpCrvReceived=t.t1*t.t2;case 7:case"end":return t.stop()}}),t)})))()},change_currency:function(e){var t=arguments,a=this;return Object(v["a"])(regeneratorRuntime.mark((function s(){var n,i,o,c,l;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(n=!(t.length>1&&void 0!==t[1])||t[1],i=t.length>2?t[2]:void 0,i&&(a.inputs[e]=i.target.value),o=a.inputs[e],a.highlightInputs(e),a.sync_balances&&!a.max_balances)for(c=0;c<r["b"].N_COINS;c++)c!=e&&(a.inputs[c],a.balances[e]*r["b"].c_rates[e]>1?(l=o/r["b"].c_rates[e]*a.balances[c]/a.balances[e],l=Math.floor(l*r["b"].c_rates[c]*100)/100,n&&m["a"].set(a.inputs,c,l)):(l=o,n&&m["a"].set(a.inputs,c,l)),l>a.wallet_balances[c]*a.rates[c]?m["a"].set(a.bgColors,c,"red"):m["a"].set(a.bgColors,c,"blue"));return s.next=8,a.getLPCrvReceived();case 8:return s.next=10,a.calcSlippage();case 10:case"end":return s.stop()}}),s)})))()},handle_migrate_new:function(){b["handle_migrate_new"]("new")}}},S=y,N=(a("5bd0"),a("2877")),I=Object(N["a"])(S,o,c,!1,null,"612af2b0",null),A=I.exports,O=function(){return{component:Promise.all([a.e("chunk-23e96fd3"),a.e("chunk-3754ad8e"),a.e("chunk-d822ad92"),a.e("chunk-1297374b")]).then(a.bind(null,"240b")),loading:A,delay:0}},B={components:{Deposit:A,DepositNative:O},created:function(){var e=this;this.$watch((function(){return r["b"].currentContract}),(function(t,a){["ren","sbtc"].includes(a)&&!["ren","sbtc"].includes(t)&&(e.swapbtc=!1)}))},data:function(){return{loading:!1}},watch:{swapbtc:function(e){this.loading=!!e}},computed:{swapComponent:function(){return this.swapbtc&&["ren","sbtc"].includes(r["b"].currentContract)?"DepositNative":"Deposit"},currentPool:function(){return r["d"].currentPool()},hasIncomplete:function(){return i["a"]()},swapbtc:{get:function(){return r["b"].swapbtc&&["ren","sbtc"].includes(r["b"].currentContract)},set:function(e){r["b"].swapbtc=e}},publicPath:function(){return"/"}},methods:{loaded:function(){"DepositNative"==this.swapComponent&&(this.loading=!1)}}},R=B,M=(a("5c42"),Object(N["a"])(R,s,n,!1,null,"2f620072",null));t["default"]=M.exports}}]);
//# sourceMappingURL=chunk-66fb8f04.a5857a73.js.map