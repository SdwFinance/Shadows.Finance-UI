(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9a294bf2"],{"07ac":function(e,t,a){var n=a("23e7"),s=a("6f53").values;n({target:"Object",stat:!0},{values:function(e){return s(e)}})},3746:function(e,t,a){"use strict";var n=a("42a7"),s=a.n(n),r=a("bf2b"),c=a.n(r),i=a("69f2"),o=a.n(i),u=a("1c35");const l=s()("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),d=e=>u["Buffer"].from(o()("sha256").update(e).digest()),p={0:{type:"p2pkh",network:"mainnet"},111:{type:"p2pkh",network:"testnet"},5:{type:"p2sh",network:"mainnet"},196:{type:"p2sh",network:"testnet"}},h=e=>{let t;try{t=c.a.decode(e)}catch(o){return!1}const a={bc:"mainnet",tb:"testnet",bcrt:"regtest"},n=a[t.prefix];if(void 0===n)return!1;const s=t.words[0];if(s<0||s>16)return!1;const r=c.a.fromWords(t.words.slice(1));let i;return 20===r.length?i="p2wpkh":32===r.length&&(i="p2wsh"),{bech32:!0,network:n,address:e,type:i}},b=e=>{if(!e)return!1;let t;const a=e.substr(0,2);if("bc"===a||"tb"===a)return h(e);try{t=l.decode(e)}catch(o){return!1}const{length:n}=t;if(25!==n)return!1;const s=t.readUInt8(0),r=t.slice(n-4,n),c=t.slice(0,n-4),i=d(d(c)).slice(0,4);return!!r.equals(i)&&(!!p[s]&&Object.assign({address:e,bech32:!1},p[s]))},w=(e,t)=>{const a=b(e);return!!a&&(t?a.network===t:a)};t["a"]=w},"5a6d":function(e,t,a){},b4a0:function(e,t,a){"use strict";var n=a("5a6d"),s=a.n(n);s.a},cc13:function(e,t,a){"use strict";a.r(t);var n=function(){var e,t=this,a=t.$createElement,n=t._self._c||a;return n("div",{staticClass:"add-liquidity"},[n("fieldset",{staticClass:"percentage"},[n("legend",[t._v(" Share of liquidity (%) "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.showstaked,expression:"showstaked"}],attrs:{id:"showstaked",type:"checkbox",name:"showstaked"},domProps:{checked:Array.isArray(t.showstaked)?t._i(t.showstaked,null)>-1:t.showstaked},on:{change:function(e){var a=t.showstaked,n=e.target,s=!!n.checked;if(Array.isArray(a)){var r=null,c=t._i(a,r);n.checked?c<0&&(t.showstaked=a.concat([r])):c>-1&&(t.showstaked=a.slice(0,c).concat(a.slice(c+1)))}else t.showstaked=s}}}),n("label",{directives:[{name:"show",rawName:"v-show",value:"sbtc"==t.currentPool,expression:"currentPool == 'sbtc'"}],attrs:{for:"showstaked"}},[t._v(" Show staked ")])]),n("ul",[n("li",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.share,expression:"share"}],style:t.shareStyles,attrs:{type:"text",id:"liquidity-share",name:"liquidity-share"},domProps:{value:t.share},on:{input:[function(e){e.target.composing||(t.share=e.target.value)},t.handle_change_share],focus:t.handle_change_share}})])])]),n("fieldset",{staticClass:"currencies"},[n("legend",[t._v("Currencies:")]),n("ul",[t._l(Object.keys(t.currencies),(function(e,a){var s;return n("li",[n("label",{staticClass:"currency_label",attrs:{for:"currency_"+a}},[n("img",{class:(s={"token-icon":!0},s[e+"-icon"]=!0,s["y"]=t.withdrawc,s[t.currentPool]=!0,s),attrs:{src:t.getTokenIcon(0==a?"btc":e)}}),n("span",{directives:[{name:"show",rawName:"v-show",value:t.withdrawc,expression:"withdrawc"}]},[t._v(t._s(t.currencies[e])+" "),n("span",{directives:[{name:"show",rawName:"v-show",value:!("usdt"==e&&"usdt"==t.currentPool)&&!["susdv2","ren","sbtc"].includes(t.currentPool),expression:"!(currency == 'usdt' && currentPool == 'usdt') && !['susdv2','ren','sbtc'].includes(currentPool)"}]},[t._v("(in "+t._s(t._f("capitalize")(e))+")")])]),n("span",{directives:[{name:"show",rawName:"v-show",value:!t.withdrawc&&!["susdv2","tbtc","ren"].includes(t.currentPool),expression:"!withdrawc && !['susdv2', 'tbtc', 'ren'].includes(currentPool)"}]},[t._v(t._s(t._f("capitalize")(e)))]),n("span",{directives:[{name:"show",rawName:"v-show",value:!t.withdrawc&&["susdv2","tbtc","ren"].includes(t.currentPool),expression:"!withdrawc && ['susdv2', 'tbtc', 'ren'].includes(currentPool)"}]},[t._v(t._s(t.currencies[e]))])]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.inputs[a],expression:"inputs[i]"}],ref:"inputs"+a,refInFor:!0,style:t.inputStyles[a],attrs:{type:"text",id:"currency_"+a,name:"from_cur",disabled:"susd"==t.currentPool},domProps:{value:t.inputs[a]},on:{input:[function(e){e.target.composing||t.$set(t.inputs,a,e.target.value)},function(e){return t.handle_change_amounts(a)}],focus:function(e){return t.handle_change_amounts(a)}}}),n("div",{directives:[{name:"show",rawName:"v-show",value:0==a&&t.amountAfterBTC>0,expression:"i == 0 && amountAfterBTC > 0"}]},[t._v(" BTC Amount received after renVM fees: "+t._s(t.amountAfterBTC)+" ")]),n("div",{directives:[{name:"show",rawName:"v-show",value:0==a&&t.amountAfterBTC<0,expression:"i == 0 && amountAfterBTC < 0"}]},[t._v(" Minimum withdraw amount in BTC is "+t._s(t.minOrderSize)+" ")])])})),n("li",{directives:[{name:"show",rawName:"v-show",value:!["susd","susdv2","tbtc","ren"].includes(t.currentPool),expression:"!['susd','susdv2','tbtc','ren'].includes(currentPool)"}]},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.withdrawc,expression:"withdrawc"}],attrs:{id:"withdrawc",type:"checkbox",name:"withdrawc"},domProps:{checked:Array.isArray(t.withdrawc)?t._i(t.withdrawc,null)>-1:t.withdrawc},on:{change:function(e){var a=t.withdrawc,n=e.target,s=!!n.checked;if(Array.isArray(a)){var r=null,c=t._i(a,r);n.checked?c<0&&(t.withdrawc=a.concat([r])):c>-1&&(t.withdrawc=a.slice(0,c).concat(a.slice(c+1)))}else t.withdrawc=s}}}),n("label",{attrs:{for:"withdrawc"}},[t._v("Withdraw wrapped")])])],2)]),n("fieldset",{directives:[{name:"show",rawName:"v-show",value:"susd"!=t.currentPool,expression:"currentPool != 'susd'"}]},[t._m(0),n("ul",[n("li",{directives:[{name:"show",rawName:"v-show",value:!["susdv2","tbtc","ren","sbtc"].includes(t.currentPool),expression:"!['susdv2','tbtc','ren','sbtc'].includes(currentPool)"}]},[n("input",{attrs:{type:"radio",id:"to_cur_comb",name:"to_cur"},domProps:{value:10,checked:10===t.to_currency},on:{click:function(e){return t.handleCheck(10)}}}),n("label",{attrs:{for:"to_cur_comb"}},[t._v(" Combination of all coins "),t._l(Object.keys(t.currencies),(function(e,a){var s;return n("span",[n("span",{directives:[{name:"show",rawName:"v-show",value:a>0,expression:"i > 0"}]},[t._v("+")]),n("img",{class:(s={"token-icon":!0},s[e+"-icon"]=!0,s["y"]=t.withdrawc,s[t.currentPool]=!0,s),attrs:{src:t.getTokenIcon(0==a?"btc":e)}})])}))],2)]),n("li",{staticClass:"withdrawin"},[n("input",{attrs:{type:"radio",id:"to_cur_0",name:"to_cur"},domProps:{value:0,checked:0===t.to_currency},on:{click:function(e){return t.handleCheck(0)}}}),n("label",{attrs:{for:"to_cur_0"}},[n("img",{class:(e={"token-icon":!0},e["btc-icon"]=!0,e),attrs:{src:t.getTokenIcon("btc")}}),n("span",[t._v(" BTC ")])])]),n("li",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.donate_dust,expression:"donate_dust"}],attrs:{type:"checkbox",id:"donate_dust",name:"donate_dust"},domProps:{checked:Array.isArray(t.donate_dust)?t._i(t.donate_dust,null)>-1:t.donate_dust},on:{change:function(e){var a=t.donate_dust,n=e.target,s=!!n.checked;if(Array.isArray(a)){var r=null,c=t._i(a,r);n.checked?c<0&&(t.donate_dust=a.concat([r])):c>-1&&(t.donate_dust=a.slice(0,c).concat(a.slice(c+1)))}else t.donate_dust=s}}}),n("label",{directives:[{name:"show",rawName:"v-show",value:!["tbtc","ren"].includes(t.currentPool),expression:"!['tbtc', 'ren'].includes(currentPool)"}],attrs:{for:"donate_dust"}},[t._v(" Donate dust"),t._m(1)])])])]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.showWithdrawSlippage,expression:"showWithdrawSlippage"}],attrs:{id:"max_slippage"}},[n("span",[t._v("Max slippage:")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.maxSlippage,expression:"maxSlippage"}],attrs:{id:"slippage02",type:"radio",name:"slippage",value:"0.2"},domProps:{checked:t._q(t.maxSlippage,"0.2")},on:{change:function(e){t.maxSlippage="0.2"}}}),n("label",{attrs:{for:"slippage02"}},[t._v("0.2%")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.maxSlippage,expression:"maxSlippage"}],attrs:{id:"slippage1",type:"radio",name:"slippage",checked:"",value:"3"},domProps:{checked:t._q(t.maxSlippage,"3")},on:{change:function(e){t.maxSlippage="3"}}}),n("label",{attrs:{for:"slippage1"}},[t._v("3%")]),n("input",{attrs:{id:"custom_slippage",type:"radio",name:"slippage",value:"-"},on:{click:function(e){t.customippageDisabled=!1}}}),n("label",{attrs:{for:"custom_slippage"},on:{click:function(e){t.customSlippageDisabled=!1}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.maxInputSlippage,expression:"maxInputSlippage"}],attrs:{type:"text",id:"custom_slippage_input",disabled:t.customSlippageDisabled,name:"custom_slippage_input"},domProps:{value:t.maxInputSlippage},on:{input:function(e){e.target.composing||(t.maxInputSlippage=e.target.value)}}}),t._v(" % ")])]),n("div",{staticClass:"input address btc"},[n("label",{attrs:{for:"address"}},[t._v("BTC withdrawal address")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.btcAddress,expression:"btcAddress"}],attrs:{id:"address",type:"text",placeholder:"Address"},domProps:{value:t.btcAddress},on:{input:function(e){e.target.composing||(t.btcAddress=e.target.value)}}})]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.nobalance,expression:"nobalance"}],staticClass:"info-message gentle-message",attrs:{id:"amount-warning"}},[t._v(" You don't have any available amount to withdraw ")]),n("approve-chi"),n("gas-price"),n("div",{staticClass:"buttons",attrs:{id:"withdraw_buttons"}},[n("p",{directives:[{name:"show",rawName:"v-show",value:"ren"==t.currentPool,expression:"currentPool == 'ren'"}]},[n("a",{attrs:{href:"https://bridge.renproject.io/"}},[t._v(" Mint/redeem renBTC ")])]),n("p",{directives:[{name:"show",rawName:"v-show",value:t.btcAddress&&!t.checkAddress,expression:"btcAddress && !checkAddress"}],staticClass:"simple-error invalid-address"},[t._v(" Invalid "+t._s(0==t.from_currency?"ETH":"BTC")+" address ")]),n("button",{directives:[{name:"show",rawName:"v-show",value:"susd"!=t.currentPool,expression:"currentPool != 'susd'"}],attrs:{id:"remove-liquidity",disabled:!t.btcAddress||t.amountAfterBTC<0||!t.checkAddress},on:{click:function(e){return t.handle_remove_liquidity()}}},[t._v(" Withdraw "),n("span",{directives:[{name:"show",rawName:"v-show",value:1==t.loadingAction,expression:"loadingAction == 1"}],staticClass:"loading line"})]),n("button",{directives:[{name:"show",rawName:"v-show",value:["susdv2","sbtc"].includes(t.currentPool)&&t.staked_balance>0,expression:"['susdv2', 'sbtc'].includes(currentPool) && staked_balance > 0 "}],attrs:{id:"remove-liquidity-unstake",disabled:t.slippage<-.03||!t.btcAddress||t.amountAfterBTC<0||!t.checkAddress},on:{click:function(e){return t.handle_remove_liquidity(!0)}}},[t._v(" Withdraw & claim "),n("span",{directives:[{name:"show",rawName:"v-show",value:2==t.loadingAction,expression:"loadingAction == 2"}],staticClass:"loading line"})]),n("button",{directives:[{name:"show",rawName:"v-show",value:["susdv2","sbtc"].includes(t.currentPool)&&t.pendingSNXRewards>0,expression:"['susdv2', 'sbtc'].includes(currentPool) && pendingSNXRewards > 0"}],attrs:{id:"claim-snx"},on:{click:t.claim_SNX}},[t._v(" Claim "+t._s((t.pendingSNXRewards/1e18).toFixed(2))+" SNX "),n("span",{directives:[{name:"show",rawName:"v-show",value:"sbtc"==t.currentPool,expression:"currentPool == 'sbtc'"}]},[t._v(" + "+t._s((t.pendingRENRewards/1e18).toFixed(2))+" REN")])]),n("button",{directives:[{name:"show",rawName:"v-show",value:["susdv2","sbtc"].includes(t.currentPool)&&t.staked_balance>0,expression:"['susdv2', 'sbtc'].includes(currentPool) && staked_balance > 0"}],attrs:{id:"unstake-snx"},on:{click:function(e){return t.handle_remove_liquidity(!0,!0)}}},[t._v(" Unstake ")]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.show_loading,expression:"show_loading"}],staticClass:"info-message gentle-message"},[n("span",{domProps:{innerHTML:t._s(t.waitingMessage)}}),t._v(" "),n("span",{staticClass:"loading line"})]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.estimateGas,expression:"estimateGas"}],staticClass:"info-message gentle-message"},[t._v(" Estimated tx cost: "+t._s((t.estimateGas*t.gasPrice/1e9*t.ethPrice).toFixed(2))+"$ ")]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.warninglow,expression:"warninglow"}],staticClass:"simple-error"},[t._v(" You're withdrawing too little amount in one coin ")]),n("Slippage",t._b({},"Slippage",{show_nobalance:t.show_nobalance,show_nobalance_i:t.show_nobalance_i},!1))],1),n("tx-table")],1)},s=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("legend",[e._v(" Withdraw % in: "),a("span",{staticClass:"tooltip"},[e._v(" [?] "),a("span",{staticClass:"tooltiptext long"},[e._v(" You can also withdraw in one coin by typing in a currency field ")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{staticClass:"tooltip"},[e._v("[?]"),a("span",{staticClass:"tooltiptext"},[e._v("(may use less gas)")])])}],r=(a("cb29"),a("4de4"),a("c740"),a("4160"),a("caad"),a("d81d"),a("fb6a"),a("a9e3"),a("b680"),a("b64b"),a("d3b7"),a("25f0"),a("3ca3"),a("159b"),a("ddb0"),a("2909")),c=(a("96cf"),a("1da1")),i=a("5530"),o=a("2b0e"),u=a("d99e"),l=a("cf45"),d=a("51bf"),p=a("5245"),h=a("2fa3"),b=a("901e"),w=a.n(b),m=a("0c33"),_=a("1079"),g=a("757b"),v=a("2bd5"),f=a("0a37"),k=a("e7e9"),x=a("0c7c"),y=a("cbc1"),N=a("3746"),P=(p["f"].compound,{components:{Slippage:m["a"],"tx-table":_["a"],"approve-chi":y["a"],GasPrice:k["a"]},data:function(){return{share:"100.00",shareStyles:{backgroundColor:"#707070",color:"#d0d0d0"},inputs:[],btcAddress:"",inputStyles:[],swapbtc:!1,loading:!1,wallet_balances:[],calc_balances:[],balances:[],staked_balance:null,token_balance:null,token_supply:0,show_nobalance:!1,show_nobalance_i:0,bgColor:[],amounts:[],to_currency:10,test:null,withdrawc:!1,donate_dust:!0,showstaked:!1,pendingSNXRewards:0,pendingRENRewards:0,balancerPool:null,show_loading:!1,waitingMessage:"",showWithdrawSlippage:!1,maxSlippage:.2,setSlippage:!1,maxInputSlippage:"",customSlippageDisabled:!0,estimateGas:0,customGasDisabled:!0,customGasInput:null,ethPrice:0,loadingAction:!1,warninglow:!1,slippagePromise:h["l"](Promise.resolve())}},created:function(){var e=this;this.$watch((function(){return d["b"].default_account}),(function(t,a){t&&a&&t.toLowerCase()!=a.toLowerCase()&&t&&e.mounted()})),this.$watch((function(){return d["b"].initializedContracts}),(function(t){t&&e.mounted()})),this.$watch((function(){return d["b"].currentContract}),(function(t,a){e.setInputStyles(!1,t,a),d["b"].initializedContracts&&e.mounted()}))},watch:{to_currency:function(e){0!=this.share&&"---"!=this.share||(this.share=100),this.setInputStyles(),null!==e&&this.handle_change_share()},withdrawc:function(e){"---"!=this.share&&(e||null!==this.to_currency||(this.to_currency=10),e&&null!==this.to_currency&&(this.to_currency=null))},maxSlippage:function(){this.setSlippage=!0},maxInputSlippage:function(e){e&&(this.setSlippage=!0)}},computed:Object(i["a"])({},d["d"],{currencies:function(){return"ren"==d["b"].currentContract?{btc:"BTC",wbtc:"WBTC"}:"sbtc"==d["b"].currentContract?{btc:"BTC",wbtc:"wBTC",sbtc:"sBTC"}:void 0},showMigrateNew:function(){return"compound"==this.currentPool&&this.oldBalance>0||"susd"==this.currentPool},nobalance:function(){return this.staked_balance&&this.token_balance.plus(this.staked_balance).eq(w()(0))},getMaxSlippage:function(){var e=this.maxSlippage;return this.maxInputSlippage&&(e=this.maxInputSlippage),(100+e)/100},minAmount:function(){return["tbtc","ren","sbtc"].includes(d["b"].currentContract)?1e-8:.01},calcFee:function(){var e=p["f"][d["b"].currentContract].N_COINS;return this.fee*e/(4*(e-1))},amountAfterBTC:function(){return w()(this.inputs[0]).times(1e8).times(1-v["b"].mintFee/1e4).minus(v["b"].minersLockFee).div(1e8).toFixed(8)},minOrderSize:function(){return((v["b"].minersReleaseFee+v["b"].burnFee/1e4)/1e8+547e-8).toFixed(8)},gasPrice:function(){return f["a"].gasPrice},gasPriceWei:function(){return f["a"].gasPriceWei},checkAddress:function(){return!1!==Object(N["a"])(this.btcAddress)}}),mounted:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$emit("loaded"),e.$watch((function(){return e.showstaked}),e.handle_change_share),e.setInputStyles(!0),d["b"].initializedContracts&&e.mounted();case 4:case"end":return t.stop()}}),t)})))()},methods:{mounted:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var a,n,s,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(["susdv2","tbtc","ren"].includes(e.currentPool)&&(e.withdrawc=!0,e.to_currency=null),"sbtc"==e.currentPool&&(e.showstaked=!0),d["b"].showSlippage=!1,d["b"].slippage=0,a=d["b"].curveRewards,!["sbtc"].includes(e.currentPool)){t.next=14;break}return e.balancerPool=new d["b"].web3.eth.Contract(p["c"],p["d"]),n=[[a._address,a.methods.earned(e.default_account).encodeABI()],[e.balancerPool._address,e.balancerPool.methods.totalSupply().encodeABI()],[e.balancerPool._address,e.balancerPool.methods.getBalance("0xc011a73ee8576fb46f5e1c5751ca3b9fe0af2a6f").encodeABI()],[e.balancerPool._address,e.balancerPool.methods.getBalance("0x408e41876cccdc0f92210600ef50372656052a38").encodeABI()]],t.next=10,d["b"].multicall.methods.aggregate(n).call();case 10:s=t.sent,r=s[1].map((function(e){return d["b"].web3.eth.abi.decodeParameter("uint256",e)})),e.pendingSNXRewards=r[0]*r[2]/r[1],e.pendingRENRewards=r[0]*r[3]/r[1];case 14:return t.next=16,l["update_fee_info"]();case 16:return t.next=18,e.update_balances();case 18:e.setCalcBalances(),e.handle_change_share();case 20:case"end":return t.stop()}}),t)})))()},getTokenIcon:function(e){return h["j"](e,this.withdrawc,this.currentPool)},toFixed:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(""==e||void 0==e||0==+e)return"0.00";2==t&&["tbtc","ren","sbtc"].includes(d["b"].currentContract)&&(t=8);var a=e.toFixed(t);return isNaN(a)?"0.00":a},inputsFormat:function(e){return this.inputs[e]?this.toFixed(+this.inputs[e]):"0.00"},setInputStyles:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0;if(a){for(var n=0;n<p["f"][t].N_COINS-p["f"][a].N_COINS;n++)this.inputs.push("0.00");p["f"][a].N_COINS-p["f"][t].N_COINS>0&&(this.inputs=this.inputs.filter((function(e,a){return a<p["f"][t].N_COINS})))}else e&&(this.inputs=new Array(Object.keys(this.currencies).length).fill("0.00"));this.inputStyles=Array(Object.keys(this.currencies).length).fill({backgroundColor:"#707070",color:"#d0d0d0"})},calcSlippage:function(){var e=arguments,t=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.slippagePromise.cancel(),t.slippagePromise=h["l"](l["calc_slippage"].apply(l,Object(r["a"])(e))),a.next=4,t.slippagePromise;case 4:case"end":return a.stop()}}),a)})))()},handleCheck:function(e){e===this.to_currency?(this.to_currency=null,d["b"].slippage=0,d["b"].showSlippage=!1):this.to_currency=e},setCalcBalances:function(){for(var e=0;e<d["b"].N_COINS;e++){var t=this.showstaked?this.token_balance.plus(this.staked_balance):this.token_balance,a=w()(1*this.balances[e]*d["b"].c_rates[e]*t/this.token_supply);o["a"].set(this.calc_balances,e,a)}},update_balances:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var a,n,s,r,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=[],d["b"].default_account){for(n=0;n<d["b"].N_COINS;n++)a.push([d["b"].underlying_coins[n]._address,d["b"].underlying_coins[n].methods.balanceOf(d["b"].default_account||"0x0000000000000000000000000000000000000000").encodeABI()]);a.push([d["b"].swap_token._address,d["b"].swap_token.methods.balanceOf(d["b"].default_account||"0x0000000000000000000000000000000000000000").encodeABI()])}else e.token_balance=w()(0);for(s=0;s<d["b"].N_COINS;s++)a.push([d["b"].swap._address,d["b"].swap.methods.balances(s).encodeABI()]);return["susdv2","sbtc"].includes(e.currentPool)&&a.push([d["b"].curveRewards._address,d["b"].curveRewards.methods.balanceOf(d["b"].default_account||"0x0000000000000000000000000000000000000000").encodeABI()]),a.push([d["b"].swap_token._address,d["b"].swap_token.methods.totalSupply().encodeABI()]),t.next=7,d["b"].multicall.methods.aggregate(a).call();case 7:r=t.sent,c=r[1].map((function(e){return d["b"].web3.eth.abi.decodeParameter("uint256",e)})),d["b"].default_account&&(c.slice(0,d["b"].N_COINS).map((function(t,a){o["a"].set(e.wallet_balances,a,+t/p["f"][e.currentPool].coin_precisions[a])})),e.token_balance=w()(c[d["b"].N_COINS]),c=c.slice(d["b"].N_COINS+1)),c.slice(0,d["b"].N_COINS+1+d["b"].N_COINS).map((function(t,a){o["a"].set(e.balances,a,+t),d["b"].default_account||o["a"].set(e.balances,a,0)})),["susdv2","sbtc"].includes(e.currentPool)?e.staked_balance=w()(c[c.length-2]):e.staked_balance=w()(0),e.token_supply=+c[c.length-1];case 13:case"end":return t.stop()}}),t)})))()},handle_change_amounts:function(e,t){var a=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var s,c,i,o,u,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a.showWithdrawSlippage=!0,a.show_nobalance=!1,!t){n.next=5;break}return a.inputs[e]=t.target.value,n.abrupt("return");case 5:return a.to_currency=null,s=a.inputs.map((function(e,t){return e/d["b"].c_rates[t]})),s=s.map((function(e){return w()(Math.floor(e).toString()).toFixed(0)})),a.show_nobalance=!1,a.show_nobalance_i=0,c=Object(r["a"])(Array(d["b"].N_COINS).keys()).map((function(e){return[d["b"].swap._address,d["b"].swap.methods.balances(e).encodeABI()]})),c.push([d["b"].swap._address,d["b"].swap.methods.calc_token_amount(s,!1).encodeABI()]),c.push([d["b"].swap_token._address,d["b"].swap_token.methods.balanceOf(d["b"].default_account||"0x0000000000000000000000000000000000000000").encodeABI()]),n.prev=13,n.next=16,d["b"].multicall.methods.aggregate(c).call();case 16:i=n.sent,o=i[1].map((function(e){return d["b"].web3.eth.abi.decodeParameter("uint256",e)})),o.slice(0,d["b"].N_COINS).forEach((function(e,t){var n=+e*d["b"].c_rates[t];n<a.inputs[t]?(a.show_nobalance|=!0,a.show_nobalance_i=t):a.show_nobalance|=!1})),u=w()(o[o.length-2]),u=u.div(w()(1-d["b"].fee*d["b"].N_COINS/(4*(d["b"].N_COINS-1)))),l=w()(o[o.length-1]),1==e&&u.gt(l.plus(w()(a.staked_balance)))||0==e&&a.amountAfterBTC<0?a.setAllInputBackground("red"):0==e&&a.amountAfterBTC>0&&a.setAllInputBackground("blue"),a.calcSlippage(a.inputs,!1),a.share="---",a.shareStyles={backgroundColor:"#707070",color:"#d0d0d0"},n.next=34;break;case 28:n.prev=28,n.t0=n["catch"](13),console.error(n.t0),a.show_nobalance=!0,a.show_nobalance_i=d["b"].bal_info.findIndex((function(e,t){return+a.inputs[t]>+e})),a.setAllInputBackground("red");case 34:case"end":return n.stop()}}),n,null,[[13,28]])})))()},getMinAmounts:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,l["update_fee_info"]();case 2:for(a=[],n=0;n<d["b"].N_COINS;n++)a[n]=w()(1).div(w()(e.getMaxSlippage)).times(e.share/100).times(w()(e.balances[n])),a[n]=a[n].times(w()(e.token_balance)).div(w()(e.token_supply)).toFixed(0,1);return t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})))()},claim_SNX:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var a,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.show_loading=!0,e.waitingMessage="Claiming ".concat((e.pendingSNXRewards/1e18).toFixed(2)," SNX"),"sbtc"==e.currentPool&&(e.waitingMessage+=" and ".concat((e.pendingRENRewards/1e18).toFixed(2)," REN")),a=Object(u["d"])(e.waitingMessage),n=a.dismiss,t.next=6,d["b"].curveRewards.methods.earned(d["b"].default_account).call();case 6:return s=t.sent,t.next=9,new Promise((function(t,a){d["b"].curveRewards.methods.getReward().send({from:d["b"].default_account,gasPrice:e.gasPriceWei,gas:2e5}).once("transactionHash",(function(e){n(),Object(u["c"])(e),t()})).on("receipt",(function(){return e.pendingSNXRewards=0})).catch((function(e){n(),x["a"](e),a(e)}))}));case 9:if("sbtc"!=e.currentPool){t.next=19;break}return t.prev=10,t.next=13,e.balancerPool.methods.exitPool(s,["0","0"]).send({from:d["b"].default_account,gasPrice:e.gasPriceWei,gas:6e5}).once("transactionHash",(function(e){Object(u["c"])(e)}));case 13:t.next=19;break;case 15:t.prev=15,t.t0=t["catch"](10),console.error(t.t0),x["a"](t.t0);case 19:case"end":return t.stop()}}),t,null,[[10,15]])})))()},unstake:function(e){var t=arguments,a=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var s,r,c,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=t.length>1&&void 0!==t[1]&&t[1],r=t.length>2&&void 0!==t[2]&&t[2],a.waitingMessage=r?"\n                        Unstaking ".concat(a.toFixed(e.div(w()(1e18)))," tokens from Mintr\n                    "):"\n                    Need to unstake ".concat(a.toFixed(e.div(w()(1e18)))," tokens from Mintr for withdrawal.\n                    <br>\n                    A bit more tokens are needed to unstake to ensure that withdrawal is successful.\n                    You'll see them in your unstaked balance afterwards.\n                        \n                "),c=Object(u["d"])(a.waitingMessage),i=c.dismiss,n.prev=4,n.next=7,new Promise((function(t,n){d["b"].curveRewards.methods.withdraw(e.toFixed(0,1)).send({from:d["b"].default_account,gasPrice:a.gasPriceWei,gas:125e3}).once("transactionHash",(function(e){i(),Object(u["c"])(e),t()})).on("receipt",(function(t){a.staked_balance=a.staked_balance.minus(e),d["b"].curveStakedBalance-=e,l["update_fee_info"]()})).catch((function(e){i(),n(e)}))}));case 7:s&&a.claim_SNX(),n.next=17;break;case 10:throw n.prev=10,n.t0=n["catch"](4),console.error(n.t0),x["a"](n.t0),a.waitingMessage="",a.show_loading=!1,n.t0;case 17:case"end":return n.stop()}}),n,null,[[4,10]])})))()},setLoadingAction:function(e){var t=this;this.loadingAction=e,setTimeout((function(){return t.loadingAction=!1}),500)},handle_remove_liquidity:function(){var e=arguments,t=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){var n,s,r,c,i,b,m,_,v,f,k,x,y,N,P,S,C,A,O,I;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(n=e.length>0&&void 0!==e[0]&&e[0],s=e.length>1&&void 0!==e[1]&&e[1],r=0==n?1:2,t.loadingAction!=r){a.next=5;break}return a.abrupt("return");case 5:return t.setLoadingAction(r),a.next=8,Promise.all([h["i"]()]);case 8:for(c=a.sent,t.ethPrice=c[0],t.estimateGas=0,d["b"].deposit_zap,["tbtc","ren","sbtc"].includes(d["b"].currentContract)&&d["b"].swap,[],i=0;i<d["b"].N_COINS;i++)b=w()(t.calc_balances[i]).minus(w()(t.inputs[i])),m=t.calc_balances[i]>0&&b.lte(w()(t.minAmount))&&b>0,m?o["a"].set(t.amounts,i,w()(t.calc_balances[i]).div(d["b"].c_rates[i]).toFixed(0,1)):o["a"].set(t.amounts,i,w()(Math.floor(t.inputs[i]/d["b"].c_rates[i]).toString()).toFixed(0,1));if("---"!=t.share){a.next=52;break}return a.prev=16,a.next=19,d["b"].swap.methods.calc_token_amount(t.amounts,!1).call();case 19:_=a.sent,a.next=27;break;case 22:a.prev=22,a.t0=a["catch"](16),console.error(a.t0),t.show_nobalance=!0,t.show_nobalance_i=t.to_currency;case 27:if(_=w()(_).times(w()(1).plus(t.calcFee)),_=w()(Math.floor(_*t.getMaxSlippage).toString()).toFixed(0,1),!t.token_balance.lt(w()(_))&&!n||!["susdv2","sbtc"].includes(t.currentPool)){a.next=32;break}return a.next=32,t.unstake(w()(_).minus(w()(t.token_balance)),n&&!s,s);case 32:if(!s){a.next=34;break}return a.abrupt("return");case 34:return v=t.inputs.filter(Number).length,f=0|d["c"].withdraw[t.currentPool].imbalance(v),t.estimateGas=f/2,a.prev=37,a.next=40,l["ensure_allowance_zap_out"](_,void 0,p["f"][d["b"].currentContract].adapterBiconomyAddress);case 40:return k=Object(u["d"])("Please confirm withdrawal transaction"),x=k.dismiss,a.next=43,g["k"]({address:t.btcAddress,coinDestination:d["b"].default_account,amounts:t.amounts,renBTCAmount:t.inputs[0],max_burn_amount:_,gasPrice:t.gasPriceWei,dismiss:x});case 43:a.next=50;break;case 45:throw a.prev=45,a.t1=a["catch"](37),t.waitingMessage="",t.show_loading=!1,a.t1;case 50:a.next=106;break;case 52:if(y=w()(t.token_balance),100!=t.share){a.next=59;break}return a.t2=w.a,a.next=57,d["b"].swap_token.methods.balanceOf(d["b"].default_account).call();case 57:a.t3=a.sent,y=(0,a.t2)(a.t3);case 59:if(t.showstaked&&(y=y.plus(t.staked_balance)),N=w()(t.share).div(w()(100)).times(y),!t.token_balance.lt(w()(N))&&!n||!["susdv2","sbtc"].includes(t.currentPool)){a.next=64;break}return a.next=64,t.unstake(w()(N).minus(w()(t.token_balance)),n&&!s,s);case 64:if(!s){a.next=66;break}return a.abrupt("return");case 66:if(N=N.toFixed(0,1),!(null!==t.to_currency&&t.to_currency<10)){a.next=90;break}return t.waitingMessage="Please approve ".concat(t.toFixed(N/1e18)," tokens for withdrawal"),P=Object(u["d"])(t.waitingMessage),x=P.dismiss,t.estimateGas=d["c"].depositzap[t.currentPool].withdraw/2,a.prev=71,a.next=74,d["b"].swap.methods.calc_withdraw_one_coin(N,t.to_currency).call();case 74:S=a.sent,S=w()(S).times(w()(1).minus(t.calcFee)),a.next=83;break;case 78:a.prev=78,a.t4=a["catch"](71),console.error(a.t4),t.show_nobalance=!0,t.show_nobalance_i=t.to_currency;case 83:return t.waitingMessage="Please confirm withdrawal transaction",C=Object(u["d"])(t.waitingMessage),x=C.dismiss,console.log("remove liqudiity one coin then burn"),a.next=88,g["l"]({address:t.btcAddress,coinDestination:d["b"].default_account,token_amounts:N,renBTCAmount:t.inputs[0],min_amount:w()(S).times(w()(1).div(w()(t.getMaxSlippage))).toFixed(0,1),gasPrice:t.gasPriceWei,dismiss:x});case 88:a.next=106;break;case 90:return a.prev=90,a.next=93,t.getMinAmounts();case 93:return A=a.sent,t.waitingMessage="Please confirm withdrawal transaction",O=Object(u["d"])(t.waitingMessage),x=O.dismiss,t.estimateGas=6e5,a.next=99,g["m"]({address:t.btcAddress,coinDestination:d["b"].default_account,amount:N,renBTCAmount:t.inputs[0],min_amounts:A,gasPrice:t.gasPriceWei,dismiss:x});case 99:a.next=106;break;case 101:throw a.prev=101,a.t5=a["catch"](90),t.waitingMessage="",t.show_loading=!1,a.t5;case 106:if("---"==t.share)for(I=0;I<d["b"].N_COINS;I++)t.handle_change_amounts(I);return t.show_loading=!1,t.waitingMessage="",t.estimateGas=0,t.gasPrice=0,a.next=113,t.update_balances();case 113:return a.next=115,l["update_fee_info"]();case 115:case"end":return a.stop()}}),a,null,[[16,22],[37,45],[71,78],[90,101]])})))()},handle_change_share:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var a,n,s,r,c,i,u,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=d["b"].deposit_zap,["tbtc","ren","sbtc"].includes(d["b"].currentContract)&&(a=d["b"].swap),e.warninglow=!1,e.showWithdrawSlippage=!1,e.show_nobalance=!1,null==e.to_currency&&0==e.withdrawc&&"---"==e.share&&(e.to_currency=10),"---"!=e.share&&null!=e.to_currency&&10!=e.to_currency&&(e.showWithdrawSlippage=!0),n=e.showstaked?e.token_balance.plus(e.staked_balance):e.token_balance,console.log(n,"TOKEN BALANCE"),d["b"].showSlippage=!1,d["b"].slippage=0,!(null!==e.to_currency&&e.to_currency<10)){t.next=40;break}if(s=w()(e.share).div(w()(100)).times(n).toFixed(0,1),100!=e.share){t.next=18;break}return t.next=16,d["b"].swap_token.methods.balanceOf(d["b"].default_account||"0x0000000000000000000000000000000000000000").call();case 16:s=t.sent,e.showstaked&&(s=w()(s).plus(w()(e.staked_balance)).toFixed(0,1));case 18:return r=p["f"][d["b"].currentContract].coin_precisions[e.to_currency],c=Array(d["b"].N_COINS).fill(0),t.prev=20,e.warninglow=!1,t.t0=w.a,t.next=25,a.methods.calc_withdraw_one_coin(s,e.to_currency).call();case 25:t.t1=t.sent,c[e.to_currency]=(0,t.t0)(t.t1),c[e.to_currency].eq(w()(0))&&(e.warninglow=!0),t.next=34;break;case 30:t.prev=30,t.t2=t["catch"](20),console.error(t.t2),""!=e.share&&(e.show_nobalance=!0,e.show_nobalance_i=e.to_currency);case 34:return i=Array(d["b"].N_COINS).fill(0),i[e.to_currency]=c[e.to_currency].div(r),e.inputs=e.inputs.map((function(e){return 0})),e.inputs[e.to_currency]=e.toFixed(w()(i[e.to_currency]),2,1),t.next=40,e.calcSlippage([],!1,c,e.to_currency);case 40:if(e.shareStyles.backgroundColor="blue",e.shareStyles.color="aqua","---"==e.share?e.share=0:e.share>100|e.share<0&&(e.shareStyles.backgroundColor="red"),!(null!==e.to_currency&&e.to_currency<10)){t.next=45;break}return t.abrupt("return");case 45:for(u=0;u<d["b"].N_COINS;u++)e.share>=0&e.share<=100?(l=w()(e.share/100*e.balances[u]*d["b"].c_rates[u]*n/e.token_supply),o["a"].set(e.inputs,u,e.toFixed(l,2,1))):o["a"].set(e.inputs,u,0),o["a"].set(e.inputStyles,u,{backgroundColor:"#707070",color:"#d0d0d0"});case 46:case"end":return t.stop()}}),t,null,[[20,30]])})))()},setAllInputBackground:function(e){for(var t=0;t<d["b"].N_COINS;t++)o["a"].set(this.inputStyles,t,Object.assign(this.inputStyles[t]||{},{backgroundColor:e}))},handle_migrate_new:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("compound"!=e.currentPool){t.next=2;break}return t.abrupt("return",l["handle_migrate_new"]("new"));case 2:return e.share=100,t.next=5,e.handle_remove_liquidity();case 5:case"end":return t.stop()}}),t)})))()}}}),S=P,C=(a("b4a0"),a("2877")),A=Object(C["a"])(S,n,s,!1,null,null,null);t["default"]=A.exports}}]);
//# sourceMappingURL=chunk-9a294bf2.6196b14a.js.map